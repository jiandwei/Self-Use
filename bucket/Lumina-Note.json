{
    "version": "0.3.9",
    "description": "Lumina Note - A lightweight note-taking application",
    "homepage": "https://github.com/blueberrycongee/Lumina-Note",
    "license": "Unknown",
    "architecture": {
        "64bit": {
            "url": "https://github.com/blueberrycongee/Lumina-Note/releases/download/v0.3.9/lumina-note_0.3.9_x64-setup.exe",
            "hash": "sha256:2ac81e152b1c2e82ac684d615d2a173c833141199e6d28868628dd36e136aca1"
        }
    },
    "depends": "innounp",
    "installer": {
        "script": [
            "Write-Host '使用InnoUnp解压安装程序...' -ForegroundColor Green",
            "# 使用innounp解压",
            "$installer = Get-ChildItem \"$dir\" -Filter '*.exe' | Select-Object -First 1",
            "& \"$(scoop prefix innounp)\\innounp.exe\" -x -y -b -d\"$dir\" \"$($installer.FullName)\"",
            "",
            "# 清理安装程序文件",
            "Remove-Item \"$dir\\*.exe\" -Force",
            "",
            "# 查找并重命名主程序文件",
            "$exeFile = Get-ChildItem \"$dir\" -Filter '*.exe' -Recurse | Where-Object {",
            "    $_.Name -notmatch 'uninstall|Uninst' -and $_.Name -match 'lumina'",
            "} | Select-Object -First 1",
            "",
            "if ($exeFile) {",
            "    if ($exeFile.Name -ne 'lumina-note.exe') {",
            "        Rename-Item $exeFile.FullName \"lumina-note.exe\" -Force",
            "    }",
            "} else {",
            "    # 如果没有找到，尝试查找任何exe文件",
            "    $exeFile = Get-ChildItem \"$dir\" -Filter '*.exe' -Recurse | Select-Object -First 1",
            "    if ($exeFile) {",
            "        Rename-Item $exeFile.FullName \"lumina-note.exe\" -Force",
            "    }",
            "}"
        ]
    },
    "bin": "lumina-note.exe",
    "shortcuts": [
        [
            "lumina-note.exe",
            "Lumina Note"
        ]
    ],
    "checkver": {
        "github": "https://github.com/blueberrycongee/Lumina-Note"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/blueberrycongee/Lumina-Note/releases/download/v$version/lumina-note_$version_x64-setup.exe"
            }
        }
    }
}
